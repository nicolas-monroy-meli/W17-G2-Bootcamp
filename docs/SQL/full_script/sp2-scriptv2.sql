-- MySQL Script generated by MySQL Workbench
-- Tue Jul 15 21:25:57 2025
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering
SET SQL_SAFE_UPDATES = 0;
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema frescos_db
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `frescos_db` ;

-- -----------------------------------------------------
-- Schema frescos_db
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `frescos_db` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `frescos_db` ;

DROP TABLE IF EXISTS localities;
CREATE TABLE localities(
    id INT PRIMARY KEY AUTO_INCREMENT,
    locality_name VARCHAR(255),
    province_name VARCHAR(255),
    country_name VARCHAR(255),

    UNIQUE(locality_name, province_name, country_name)
);

DROP TABLE IF EXISTS sellers;
CREATE TABLE sellers(
    id INT PRIMARY KEY AUTO_INCREMENT,
    cid VARCHAR(255) NOT NULL CHECK (cid > 0),
    company_name VARCHAR(255) NOT NULL,
    `address` VARCHAR(255)  NOT NULL,
    telephone VARCHAR(255)  NOT NULL,
    locality_id INT  NOT NULL,

    FOREIGN KEY(locality_id) REFERENCES localities(id),

    UNIQUE(cid)
);


DROP TABLE IF EXISTS warehouses;
DROP TABLE IF EXISTS carries;

CREATE TABLE carries (
    id INT AUTO_INCREMENT PRIMARY KEY,
    cid VARCHAR(50) NOT NULL UNIQUE,
    company_name VARCHAR(255) NOT NULL,
    address VARCHAR(255) NOT NULL,
    telephone VARCHAR(50) NOT NULL,
    locality_id INT NOT NULL,
    FOREIGN KEY (locality_id) REFERENCES localities(id)
);
CREATE TABLE warehouses (
    id INT AUTO_INCREMENT PRIMARY KEY,
    warehouse_code VARCHAR(255) UNIQUE NOT NULL,
    address VARCHAR(255) NOT NULL,
    telephone VARCHAR(255) NOT NULL,
    minimum_capacity INT NOT NULL,
    minimum_temperature FLOAT NOT NULL
);

-- -----------------------------------------------------
-- Table `frescos_db`.`employees`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `frescos_db`.`employees` ;

CREATE TABLE IF NOT EXISTS `frescos_db`.`employees` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_card_number` VARCHAR(255) NULL DEFAULT NULL,
  `first_name` VARCHAR(255) NULL DEFAULT NULL,
  `last_name` VARCHAR(255) NULL DEFAULT NULL,
  `wareHouse_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_card_number` (`id_card_number` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `frescos_db`.`sections`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `frescos_db`.`sections` ;

CREATE TABLE IF NOT EXISTS `frescos_db`.`sections` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `section_number` INT NOT NULL,
  `current_temperature` DOUBLE NOT NULL,
  `minimum_temperature` DOUBLE NOT NULL,
  `current_capacity` INT NOT NULL,
  `minimum_capacity` INT NOT NULL,
  `maximum_capacity` INT NOT NULL,
  `warehouse_id` INT NOT NULL,
  `product_type_id` INT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `frescos_db`.`product_batches`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `frescos_db`.`product_batches` ;

CREATE TABLE IF NOT EXISTS `frescos_db`.`product_batches` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `batch_number` INT NOT NULL,
  `current_quantity` INT NOT NULL,
  `initial_quantity` INT NOT NULL,
  `current_temperature` INT NOT NULL,
  `minimum_temperature` INT NOT NULL,
  `due_date` DATETIME NOT NULL,
  `manufacturing_date` DATE NOT NULL,
  `manufacturing_hour` VARCHAR(12) NOT NULL,
  `product_id` INT NOT NULL,
  `section_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_section_id` (`section_id` ASC) VISIBLE,
  CONSTRAINT `fk_section_id`
    FOREIGN KEY (`section_id`)
    REFERENCES `frescos_db`.`sections` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `frescos_db`.`inbound_orders`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `frescos_db`.`inbound_orders` ;

CREATE TABLE IF NOT EXISTS `frescos_db`.`inbound_orders` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `order_date` DATE NULL DEFAULT NULL,
  `order_number` VARCHAR(255) NOT NULL,
  `employee_id` INT NOT NULL,
  `product_batch_id` INT NOT NULL,
  `wareHouse_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `order_number` (`order_number` ASC) VISIBLE,
  INDEX `employee_id` (`employee_id` ASC) VISIBLE,
  INDEX `product_batch_id` (`product_batch_id` ASC) VISIBLE,
  CONSTRAINT `inbound_orders_ibfk_1`
    FOREIGN KEY (`employee_id`)
    REFERENCES `frescos_db`.`employees` (`id`),
  CONSTRAINT `inbound_orders_ibfk_2`
    FOREIGN KEY (`product_batch_id`)
    REFERENCES `frescos_db`.`product_batches` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `frescos_db`.`products`
-- -----------------------------------------------------

DROP TABLE IF EXISTS products;
CREATE TABLE products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    product_code VARCHAR(100) NOT NULL UNIQUE,
    description TEXT NOT NULL,
    height DOUBLE NOT NULL CHECK (height >= 0),
    length DOUBLE NOT NULL CHECK (length >= 0),
    width DOUBLE NOT NULL CHECK (width >= 0),
    net_weight DOUBLE NOT NULL CHECK (net_weight >= 0),
    expiration_rate DOUBLE NOT NULL CHECK (expiration_rate >= 0),
    freezing_rate DOUBLE NOT NULL,
    recommended_freezing_temperature DOUBLE NOT NULL,
    product_type_id INT NOT NULL,
    seller_id INT,
    -- Foraneas
    -- FOREIGN KEY (product_type_id) REFERENCES product_types(id),
    FOREIGN KEY (seller_id) REFERENCES sellers(id)
);

DROP TABLE IF EXISTS product_records;
CREATE TABLE product_records (
    id INT AUTO_INCREMENT PRIMARY KEY,
    last_update_date DATETIME(6) NOT NULL,
    purchase_price DECIMAL(19,2) NOT NULL,
    sale_price DECIMAL(19,2) NOT NULL,
    product_id INT NOT NULL,
    FOREIGN KEY (product_id) REFERENCES products(id)
);


DROP TABLE IF EXISTS `buyers`;

CREATE TABLE `buyers` (
    `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `id_card_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
    `first_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
    `last_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY `buyer_card_number_unique` (`id_card_number`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

DROP TABLE IF EXISTS `purchases_orders`;

CREATE TABLE `purchase_orders` (
    `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `order_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
    `order_date` timestamp NULL DEFAULT NULL,
    `tracking_code` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
    `buyer_id` int(10) unsigned DEFAULT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY `purcharse_order_number_unique` (`order_number`),
    KEY `purchase_orders_buyer_id_foreign` (`buyer_id`),
    CONSTRAINT `purchase_orders_buyer_id_foreign` FOREIGN KEY (`buyer_id`) REFERENCES `buyers` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


DROP TABLE IF EXISTS `order_details`;

CREATE TABLE `order_details` (
    `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `clean_liness_status` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
    `quantity` int unsigned NULL DEFAULT NULL,
    `temperature` decimal unsigned NULL DEFAULT NULL,
    `product_record_id` int(10) DEFAULT NULL,
    `purchase_order_id` int(10) unsigned DEFAULT NULL,
    PRIMARY KEY (`id`),
    KEY `order_details_product_record_id_foreign` (`product_record_id`),
    CONSTRAINT `order_details_product_record_id_foreign` FOREIGN KEY (`product_record_id`) REFERENCES `product_records` (`id`),
    KEY `order_details_purchase_order_id_foreign` (`purchase_order_id`),
    CONSTRAINT `order_details_purchase_order_id_foreign` FOREIGN KEY (`purchase_order_id`) REFERENCES `purchase_orders` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


DELETE FROM localities;
INSERT INTO localities (locality_name, province_name, country_name) VALUES
('Brooklyn', 'New York', 'United States'),
('Santa Monica', 'California', 'United States'),
('Cambridge', 'Massachusetts', 'United States'),
('Vancouver', 'British Columbia', 'Canada'),
('Medellín', 'Antioquia', 'Colombia');


DELETE FROM sellers;
INSERT INTO sellers (id, cid, company_name, address, telephone, locality_id) VALUES
(1, 1001, 'Alpha Traders Inc.', '123 Alpha St, New York, NY', '+1-212-555-0101', 1),
(2, 1008, 'Omicron Ventures', '888 Omicron Dr, San Francisco, CA', '+1-415-555-0110', 2),
(3, 1002, 'Beta Logistics Ltd.', '456 Beta Blvd, Chicago, IL', '+1-312-555-0102', 1),
(4, 1009, 'Lambda Freight Co.', '999 Lambda Way, Phoenix, AZ', '+1-602-555-0111', 2),
(5, 1003, 'Gamma Exports', '789 Gamma Ave, Houston, TX', '+1-713-555-0103', 3),
(6, 1004, 'Delta Wholesale', '321 Delta Rd, Miami, FL', '+1-305-555-0104', 3),
(7, 1005, 'Epsilon Products', '654 Epsilon Pkwy, Seattle, WA', '+1-206-555-0105', 4),
(8, 1006, 'Zeta Solutions', '987 Zeta Ln, Denver, CO', '+1-720-555-0106', 4),
(9, 1010, 'Sigma Technologies', '111 Sigma Blvd, Austin, TX', '+1-512-555-0112', 5),
(10, 1007, 'Theta Goods Co.', '246 Theta Cir, Boston, MA', '+1-617-555-0108', 5);

DELETE FROM warehouses;

INSERT INTO warehouses (warehouse_code, address, telephone, minimum_capacity, minimum_temperature) VALUES
('WH-001', '789 Industrial Ave, Brooklyn, NY', '+1-718-555-0201', 2500, -18.5),
('WH-002', '456 Tech Valley Rd, Santa Monica, CA', '+1-310-555-0202', 1800, 15.0),
('WH-003', '321 Innovation Parkway, Cambridge, MA', '+1-617-555-0203', 3000, 2.0),
('WH-004', '654 Portside Drive, Vancouver', '+1-604-555-0204', 4200, -25.0),
('WH-005', '987 Coffee District, Medellín', '+1-574-555-0205', 1500, 18.0),
('WH-006', '135 Automotive Blvd, Brooklyn, NY', '+1-718-555-0206', 3500, 10.0),
('WH-007', '246 Pharma Park, Santa Monica, CA', '+1-310-555-0207', 2000, 5.0),
('WH-008', '864 Agro Center, Cambridge, MA', '+1-617-555-0208', 2800, 12.5),
('WH-009', '753 Cold Storage Lane, Vancouver', '+1-604-555-0209', 5000, -30.0),
('WH-010', '369 Textile Complex, Medellín', '+1-574-555-0210', 3200, 20.0);

DELETE FROM carries;

INSERT INTO carries (cid, company_name, address, telephone, locality_id) VALUES
('1001', 'Alpha Traders Inc.', '123 Alpha St, New York, NY', '+1-212-555-0101', 1),
('1008', 'Omicron Ventures', '888 Omicron Dr, San Francisco, CA', '+1-415-555-0110', 2),
('1002', 'Beta Logistics Ltd.', '456 Beta Blvd, Chicago, IL', '+1-312-555-0102', 1),
('1009', 'Lambda Freight Co.', '999 Lambda Way, Phoenix, AZ', '+1-602-555-0111', 2),
('1003', 'Gamma Exports', '789 Gamma Ave, Houston, TX', '+1-713-555-0103', 3),
('1004', 'Delta Wholesale', '321 Delta Rd, Miami, FL', '+1-305-555-0104', 3),
('1005', 'Epsilon Products', '654 Epsilon Pkwy, Seattle, WA', '+1-206-555-0105', 4),
('1006', 'Zeta Solutions', '987 Zeta Ln, Denver, CO', '+1-720-555-0106', 4),
('1010', 'Sigma Technologies', '111 Sigma Blvd, Austin, TX', '+1-512-555-0112', 5),
('1007', 'Theta Goods Co.', '246 Theta Cir, Boston, MA', '+1-617-555-0108', 5);

DELETE FROM sections;
DELETE FROM product_batches;

INSERT INTO `sections` (
    `section_number`,
    `current_temperature`,
    `minimum_temperature`,
    `current_capacity`,
    `minimum_capacity`,
    `maximum_capacity`,
    `warehouse_id`,
    `product_type_id`) VALUES
                           (1, 0, -5, 50, 20, 100, 1, 1),
                           (2, -2, -6, 60, 30, 110, 2, 2),
                           (3, 1, -4, 70, 40, 120, 3, 3),
                           (4, -3, -7, 80, 50, 130, 4, 4),
                           (5, 2, -5, 90, 60, 140, 5, 5),
                           (6, -4, -8, 100, 70, 150, 6, 6),
                           (7, 3, -6, 110, 80, 160, 7, 7),
                           (8, -5, -9, 120, 90, 170, 8, 8),
                           (9, 4, -7, 130, 100, 180, 9, 9),
                           (10, -6, -10, 140, 110, 190, 10, 10);

INSERT INTO `product_batches` (
    batch_number,
    current_quantity,
    initial_quantity,
    current_temperature,
    minimum_temperature,
    due_date,
    manufacturing_date,
    manufacturing_hour,
    product_id,
    section_id
) VALUES
      (1, 200, 200, 2, -5, '2024-07-05 17:00:00', '2024-06-01', '08:00:00', 1, 1),
      (2, 310, 310, -2, -6, '2024-08-01 12:00:00', '2024-07-01', '09:30:00', 2, 2),
      (3, 400, 400, 3, -4, '2024-07-15 08:30:00', '2024-05-10', '10:30:00', 3, 3),
      (4, 500, 500, -3, -7, '2024-09-10 16:30:00', '2024-06-20', '14:45:00', 4, 4),
      (5, 600, 600, 2, -5, '2024-10-09 10:00:00', '2024-08-18', '07:15:00', 5, 5),
        (4, 80, 80, 3, -6, '2024-08-10 11:00:00', '2024-06-10', '10:00:00', 4, 7)
;


DELETE FROM products;
INSERT INTO products (
    product_code, description, height, length, width, net_weight, expiration_rate, freezing_rate, recommended_freezing_temperature, product_type_id, seller_id
) VALUES
('TOM123', 'Caja de tomate fresco', 20.5, 30.2, 15.0, 8.2, 1.0, 0.0, -1.0, 1, 1),
('LECH456', 'Lechuga orgánica', 8.3, 12.0, 8.0, 0.5, 0.8, 0.0, -0.5, 2, 2),
('MANZ789', 'Manzana roja premium', 7.0, 10.0, 8.0, 0.45, 1.2, 0.0, -0.5, 3, 1),
('ZAN901', 'Zanahoria seleccionada', 18.0, 25.0, 5.5, 1.1, 0.9, 0.0, -0.7, 4, 3),
('PAPA321', 'Papa blanca lavada', 12.0, 18.0, 12.0, 3.8, 1.1, 0.0, -1.0, 1, 2);


DELETE FROM product_records;
INSERT INTO product_records (
    last_update_date, purchase_price, sale_price, product_id
) VALUES
('2024-06-15 10:23:00.000000', 10.00, 15.50, 1),
('2024-06-16 08:00:00.000000', 4.00, 6.50, 2);


INSERT INTO buyers (id_card_number, first_name, last_name) VALUES
('CC1001', 'Juan', 'Pérez'),
('CC1002', 'María', 'González'),
('CC1003', 'Carlos', 'Ramírez'),
('CC1004', 'Ana', 'Martínez'),
('CC1005', 'Luis', 'Fernández'),
('CC1006', 'Sofía', 'Torres'),
('CC1007', 'Pedro', 'Ríos'),
('CC1008', 'Isabel', 'Cruz');

INSERT INTO purchase_orders (order_number, order_date, tracking_code, buyer_id) VALUES
('ORD-2024-001', '2024-06-10 08:30:00', 'TRK-501', 1),
('ORD-2024-002', '2024-06-11 09:15:00', 'TRK-502', 2),
('ORD-2024-003', '2024-06-11 10:50:00', 'TRK-503', 1),
('ORD-2024-004', '2024-06-12 14:20:00', 'TRK-504', 3),
('ORD-2024-005', '2024-06-13 13:00:00', 'TRK-505', 5),
('ORD-2024-006', '2024-06-14 15:30:00', 'TRK-506', 4),
('ORD-2024-007', '2024-06-15 11:48:00', 'TRK-507', 7),
('ORD-2024-008', '2024-06-16 16:43:00', 'TRK-508', 6),
('ORD-2024-009', '2024-06-17 09:50:00', 'TRK-509', 8);

INSERT INTO order_details (clean_liness_status, quantity, temperature, product_record_id, purchase_order_id) VALUES
('Limpio', 10, 12.5, NULL, 1),
('Sucia', 5, 15.0, NULL, 1),
('Limpio', 8, 13.0, NULL, 2),
('Limpio', 20, 11.5, NULL, 3),
('Limpio', 7, 15.2, NULL, 4),
('Sucia', 12, 16.0, NULL, 4),
('Limpio', 18, 10.7, NULL, 5),
('Limpio', 24, 14.8, NULL, 6),
('Limpio', 11, 11.2, NULL, 7),
('Sucia', 6, 15.3, NULL, 7),
('Limpio', 15, 12.1, NULL, 8),
('Limpio', 9, 13.9, NULL, 8),
('Limpio', 13, 14.5, NULL, 9),
('Sucia', 4, 17.0, NULL, 9),
('Limpio', 17, 10.9, NULL, 5);


INSERT INTO employees (id_card_number, first_name, last_name, wareHouse_id)
VALUES ('1001', 'Juan', 'Perez', 1),
       ('1002', 'Maria', 'Gomez', 2),
       ('1003', 'Carlos', 'Rodriguez', 1),
       ('1004', 'Ana', 'Lopez', 3),
       ('1005', 'Pedro', 'Martinez', 2),
       ('1006', 'Laura', 'Sanchez', 1),
       ('1007', 'David', 'Garcia', 3),
       ('1008', 'Sofia', 'Ramirez', 2),
       ('1009', 'Pablo', 'Torres', 1),
       ('1010', 'Elena', 'Diaz', 3);

INSERT INTO inbound_orders (order_date, order_number, employee_id, product_batch_id, wareHouse_id)
VALUES ('2023-01-15', 'ORD-2023-001', 1, 1, 1),
       ('2023-01-16', 'ORD-2023-002', 2, 3, 2),
       ('2023-01-17', 'ORD-2023-003', 3, 2, 1),
       ('2023-01-18', 'ORD-2023-004', 4, 3, 3),
       ('2023-01-19', 'ORD-2023-005', 5, 5, 2),
       ('2023-01-20', 'ORD-2023-006', 6, 4, 1),
       ('2023-01-21', 'ORD-2023-007', 7, 2, 3),
       ('2023-01-22', 'ORD-2023-008', 8, 3, 2),
       ('2023-01-23', 'ORD-2023-009', 9, 2, 1),
       ('2023-01-24', 'ORD-2023-010', 10, 1, 3);

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;